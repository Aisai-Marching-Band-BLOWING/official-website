---
import { getCollection } from "astro:content";
import IndexNewsPostlink from "./IndexNewsPostlink.astro";
import SectionTitle from "./SectionTitle.astro";

const allPosts = await getCollection("news");
---

<section class="root">
  <SectionTitle title="お知らせ" subtitle="NEWS" />

  <div class="post-area">
    {
      [...allPosts].reverse().map((post) => (
        <IndexNewsPostlink
          href={`news/${post.id}`}
          pubDate={post.data.pubDate
            .toLocaleDateString("ja-JP", {
              year: "numeric",
              month: "2-digit",
              day: "2-digit",
            })
            .replace(/\//g, "-")}
          title={post.data.title}
        />
      ))
    }
  </div>

  <a href="news.html" class="link-btn">お知らせ一覧はこちら</a>
</section>

<style>
  .root {
    --shippo-bg-color: var(--gray3);
    background-color: rgb(var(--shippo-bg-color));
    background-image: var(--shippo-pattern-img);
    background-size: var(--shippo-pattern-size);
  }

  .post-area {
    margin-top: 1rem;
    display: grid;
    align-items: start;
    grid-template-columns: repeat(auto-fit, minmax(17em, 1fr));
    gap: 1rem;
    max-height: 50vh;
    overflow: auto;
  }
</style>
